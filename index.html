<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GLLITTUBE</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #181818;
            color: #fff;
            margin: 0;
            padding: 0;
        }
        #playlist-buttons {
            margin-top: 20px;
            text-align: center;
        }
        #playlist-buttons button {
            margin: 5px;
            padding: 10px 20px;
            background-color: #ff77c6;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'berk', sans-serif;
        }
        #playlist-buttons button:hover {
            background-color: #ff52b7;
        }
        #playlist-buttons button.active {
            background-color: #ff52b7;
        }
        #reverse-btn {
            padding: 10px 20px;
            background-color: #ff77c6;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            font-family: 'berk', sans-serif;
        }
        #reverse-btn:hover {
            background-color: #ff52b7;
        }
        #video-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            justify-content: center; /* ‚úÖ Center the grid itself */
            gap: 20px;
            padding: 20px;
        }

        .video {
            background-color: #202020;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            max-width: 360px; 
            width: 100%;
            margin: 0 auto;
        }
        .video:hover {
            transform: scale(1.05);
        }
        .video-thumbnail {
            width: 100%;
            height: auto;
            border-radius: 8px;
        }
        h3 {
            font-size: 16px;
            margin-top: 10px;
            color: #fff;
        }
        #loading {
            text-align: center;
            padding: 20px;
            color: #fff;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .modal.show {
            display: block;
            opacity: 1;
        }
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 90%;
            max-width: 800px;
            transform: translate(-50%, -50%);
            background-color: #181818;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            
        }
        #video-frame-container {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* Maintain 16:9 aspect ratio */
        }
        #video-frame-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 8px;
        }
        /* Logo styling */
        #logo-container {
            text-align: center;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        #site-logo {
            width: 300px; /* Adjust width as needed */
            height: auto;
            max-width: 100%;
            cursor: pointer;
            transition: transform 0.2s ease-in-out;
            
        }
        #site-logo:hover {
            transform: scale(1.05); /* Slight zoom on hover */
        }
        #video-warning {
            font-size: 12px;
            color: #aaa;
            text-align: center;
            margin-top: 10px;
            margin-bottom: 0;
        }
        #logo-caption {
            font-size: 10px;
            color: #bbb;
            margin-top: 4px;
            text-align: center;
            font-style: italic;
            font-family: 'berk', sans-serif;
        }
        

        @font-face {
            font-family: 'berk';
            src: url('kkberkbm.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            }


            #top-link {
                position: absolute;
                top: 20px;
                right: 20px;
                z-index: 1000;
            }

            #top-link a {
                background-color: #ff77c6;
                color: white;
                text-decoration: none;
                padding: 8px 16px;
                border-radius: 5px;
                font-size: 14px;
                transition: background-color 0.2s ease-in-out;
                font-family: 'berk', sans-serif;
            }

            @media screen and (max-width: 600px) {
                #top-link {
                    position: static;
                    text-align: center;
                    margin-top: 10px;
                }

                #top-link a {
                    display: inline-block;
                    margin-top: 10px;
                }
            }

            #top-link a:hover {
                background-color: #ff52b7;
            }



        /* Close button */
        .close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 30px;
            color: #fff;
            cursor: pointer;
            transition: 0.3s;
        }
        .close:hover {
            color: #ff4c91;
        }

        body.light {
        background-color: #CB9DF0;
        color: #111;
        }

        body.light .video {
        background-color: #FDDBBB;
        }

        body.light h3 {
        color: #111;
        }

        body.light #playlist-buttons button,
        body.light #reverse-btn,
        body.light #top-link a,
        body.light #theme-toggle {
        background-color: #F0C1E1;
        color: white;
        }

        body.light #playlist-buttons button:hover,
        body.light #reverse-btn:hover,
        body.light #top-link a:hover,
        body.light #theme-toggle:hover {
        background-color: #FDDBBB;
        }

        body.dark {
        background-color: #181818;
        color: #fff;
        }

        body.dark .video {
        background-color: #202020;
        }

        body.dark h3 {
        color: #fff;
        }

        body.dark #playlist-buttons button,
        body.dark #reverse-btn,
        body.dark #top-link a,
        body.dark #theme-toggle {
        background-color: #ff77c6;
        color: white;
        }

        body.dark #playlist-buttons button:hover,
        body.dark #reverse-btn:hover,
        body.dark #top-link a:hover,
        body.dark #theme-toggle:hover {
        background-color: #ff52b7;
        }

        #splash-text {
            font-family: 'berk', sans-serif;
            font-size: 16px;
            color: #ffccff;
            text-align: center;
            margin-top: 5px;
            animation: splashIn 2s ease-in-out infinite;
        }

        @keyframes splashIn {
            0% {
                opacity: 1;
                transform: scale(0.95) rotate(-2deg);
            }
            50% {
                opacity: 1;
                transform: scale(1.05) rotate(2deg);
            }
            100% {
                opacity: 1;
                transform: scale(0.95) rotate(-2deg);
            }
        }




        
    </style>
</head>
<body>
    <link rel="icon" type="image/png" href="favicon.png" />
    <div id="logo-container">
        <img 
        src="gllittube.png" 
        alt="Site Logo" 
        id="site-logo"
        data-dark="gllittube.png"
        data-light="gllittube-light.png"
        />

        <p id="logo-caption">Created by u\BigGamingGamer0 (Kay)</p>
      </div>

      <p id="splash-text">‚ú® Loading magic...</p>


    <!-- Playlist Buttons -->
    <div id="playlist-buttons">
        <!-- Buttons will be dynamically added here -->
    </div>

    <div style="text-align: center; margin-top: 20px;">
        <input
          type="text"
          id="search-input"
          placeholder="Search videos by title or tag... (Current Playlist)"
          style="padding: 10px; width: 80%; max-width: 400px; border-radius: 5px; border: none;"
          oninput="filterVideos()"
        />
      </div>
      
      <div id="top-link">
        <a href="https://illitville.com" target="_blank">Check out ILLITville</a>
        
      </div>
      <div id="theme-toggle-container" style="text-align: center; margin-top: 10px;">
        <button id="theme-toggle">üåô Dark Mode</button>
      </div>
      
      
    <!-- Reverse Order Button -->
    <div style="text-align: center; margin-top: 20px;">
        <button id="reverse-btn" onclick="reverseOrder()">Sort</button>
    </div>

    <!-- Video Container -->
    <div id="video-container"></div>

    <!-- Loading Indicator -->
    <div id="loading" style="display: none;">Loading...</div>

    <!-- Video Modal -->
    <div id="video-modal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeModal()">&times;</span>
          
         
          <div id="video-frame-container"></div>
      
    
          <p id="video-warning">
            If the video says unavailable, the channel it is uploaded to does not allow embedding, the video must be watched on Youtube.</p>
        </div>
      </div>

    <script>
         const API_KEY = 'AIzaSyBvMFFCIzxQ1hzaJHrEgXBKDY7zg0MQv9s'; 

       
        const playlists = [
            { name: 'All Variety', id: 'PLCrqR_JpjIzwq8PZ9uwrnrvYbw6jaY3ih' },  
            { name: 'Super ILLIT', id: 'PLr-TseZWHDKkf9F59CdpvT2Zbj-vCwNQg' }, 
            { name: 'Behind-It', id: 'PLr-TseZWHDKk2YN6b7nHzUpkReQDhS-Xw' }, 
            { name: 'ILLIT On-Air', id: 'PLr-TseZWHDKmtATvbZQwVdoiDaKozx5EK' }, 
            { name: 'Minju\'s Pink Cabinet', id: 'PLkYAFN95Zse9tmkzv4PXOfGucbF1_vXQ3' },
            { name: 'Night Of ILLIT', id: 'PLr-TseZWHDKl0kFGW5RS5W0eWj38Ut1wQ' },
            { name: 'Super Real ILLIT', id: 'PLr-TseZWHDKkW2zufgb85THhTdNO4fxCI' },
            { name: 'Beside-It', id: 'PLr-TseZWHDKmJ3tAXRWCZvXXq5DppUguz' },
            { name: 'I\'ll Like It', id: 'PLr-TseZWHDKk_ZQVcjKZtuvwmukFCBRVi' },
            { name: 'ILLIT Ready', id: 'PLr-TseZWHDKm0tyqvhSo_tDfNezNoBUTj' },
            { name: 'Log-It', id: 'PLr-TseZWHDKmYNhB5qsaxPZKhhjL3qakl' },
            { name: '10 Minute Debate', id: 'PLr-TseZWHDKnRRStlMrskwNNaCHcBZMqZ' },
            { name: 'Introduce ILLIT', id: 'PLr-TseZWHDKkzkTNLxlB_GfGxsoyO41TU' },
        ];

        let currentPlaylistId = playlists[0].id; 
        let allVideos = [];
        let reversed = false;

      
        function generatePlaylistButtons() {
            const container = document.getElementById('playlist-buttons');
            playlists.forEach((playlist, index) => {
                const button = document.createElement('button');
                button.innerText = playlist.name;
                button.onclick = () => changePlaylist(playlist.id, index);
                button.classList.add('playlist-btn');
                button.setAttribute('data-index', index);
                container.appendChild(button);
            });
         
            setActiveButton(0);
        }

         async function fetchAllVideos() {
            let allItems = [];
            let pageToken = '';
            do {
                const url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${currentPlaylistId}&key=${API_KEY}&pageToken=${pageToken}`;
                const response = await fetch(url);
                const data = await response.json();
                allItems = allItems.concat(data.items);
                pageToken = data.nextPageToken || '';
            } while (pageToken);

          
            const videoIds = allItems.map(item => item.snippet.resourceId.videoId);
            const videoMeta = await fetchVideoTags(videoIds);

            
            allItems.forEach(item => {
                const vid = item.snippet.resourceId.videoId;
                const meta = videoMeta[vid] || { tags: [], title: item.snippet.title };

                item.tags = meta.tags;
                item.snippet.title = meta.title; // ‚úÖ override with English title if available
            });


            return allItems;
        }

        async function fetchVideoTags(videoIds) {
            const tagsMap = {};
            const chunkSize = 50;

            for (let i = 0; i < videoIds.length; i += chunkSize) {
                const chunk = videoIds.slice(i, i + chunkSize).join(',');
                const url = `https://www.googleapis.com/youtube/v3/videos?part=snippet,localizations&id=${chunk}&key=${API_KEY}`;
                const response = await fetch(url);
                const data = await response.json();

                data.items.forEach(video => {
                    const videoId = video.id;
                    const tags = video.snippet.tags || [];
                    const localizedTitle = video.localizations?.en?.title || video.snippet.title;

                    tagsMap[videoId] = {
                        tags: tags,
                        title: localizedTitle
                    };
                });
            }

            return tagsMap;
        }



    
        async function loadVideos() {
            document.getElementById('loading').style.display = 'block';
            allVideos = await fetchAllVideos();
            document.getElementById('loading').style.display = 'none';
            displayVideos(); 
        }

        const reverseByDefault = [
            'PLCrqR_JpjIzwq8PZ9uwrnrvYbw6jaY3ih' 
        ];

 
    function displayVideos() {
        const container = document.getElementById('video-container');
        container.innerHTML = ''; 

       
        let videosToDisplay = [...allVideos]; 

        if (reverseByDefault.includes(currentPlaylistId)) {
            console.log(`Reversing playlist: ${currentPlaylistId}`);
            videosToDisplay.reverse();
            reversed = true; 
        } else {
            reversed = false; 
        }

        videosToDisplay.forEach(item => {
            const videoId = item.snippet.resourceId.videoId;
            const title = item.snippet.title;
            const thumbnailUrl = item.snippet.thumbnails.medium.url;

            const videoElement = document.createElement('div');
            videoElement.className = 'video';
            videoElement.setAttribute('data-video-id', videoId);
            videoElement.setAttribute('data-title', title);

            videoElement.innerHTML = `
                <img src="${thumbnailUrl}" alt="${title}" class="video-thumbnail" />
                <h3>${title}</h3>
            `;

       
            videoElement.addEventListener('click', () => loadVideo(videoId));
            container.appendChild(videoElement);
        });

    
    }

            function filterVideos() {
            const query = document.getElementById("search-input").value.toLowerCase();
            const container = document.getElementById("video-container");
            container.innerHTML = '';

            let filtered = allVideos.filter(item => {
                const title = item.snippet.title.toLowerCase();
                const tags = (item.tags || []).map(tag => tag.toLowerCase());
                return title.includes(query) || tags.some(tag => tag.includes(query));
            });

            if (reversed) filtered = filtered.reverse();

            filtered.forEach(item => {
                const videoId = item.snippet.resourceId.videoId;
                const title = item.snippet.title;
                const thumbnailUrl = item.snippet.thumbnails.medium.url;

                const videoElement = document.createElement('div');
                videoElement.className = 'video';
                videoElement.setAttribute('data-video-id', videoId);
                videoElement.setAttribute('data-title', title);

                videoElement.innerHTML = `
                    <img src="${thumbnailUrl}" alt="${title}" class="video-thumbnail" />
                    <h3>${title}</h3>
                `;

                videoElement.addEventListener('click', () => loadVideo(videoId));
                container.appendChild(videoElement);
            });
        }


     

     
        function loadVideo(videoId) {
            const modal = document.getElementById('video-modal');
            const container = document.getElementById('video-frame-container');

         
            container.innerHTML = `
                <iframe
                    src="https://www.youtube.com/embed/${videoId}?autoplay=1"
                    frameborder="0"
                    allowfullscreen
                ></iframe>
            `;

            modal.classList.add('show');
        }

        function closeModal() {
            const modal = document.getElementById('video-modal');
            const container = document.getElementById('video-frame-container');

        
            container.innerHTML = '';
            modal.classList.remove('show');
        }

    
        window.onclick = function (event) {
            const modal = document.getElementById('video-modal');
            if (event.target === modal) {
                closeModal();
            }
        };

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                closeModal();
            }
        });

      
        function reverseOrder() {
            const container = document.getElementById('video-container');
            const videos = Array.from(container.children);
            container.innerHTML = ''; 

         
            videos.reverse().forEach(video => container.appendChild(video));

            reversed = !reversed;
        }

      
        function changePlaylist(newPlaylistId, index) {
            currentPlaylistId = newPlaylistId;
            reversed = false; 
            loadVideos();
            setActiveButton(index);
        }

        // üåó Dark/Light mode toggle
        const savedTheme = localStorage.getItem('theme') || 'dark';
            document.body.classList.add(savedTheme);
            updateThemeButtonText(savedTheme);

            document.getElementById('theme-toggle').addEventListener('click', () => {
            const current = document.body.classList.contains('light') ? 'light' : 'dark';
            const newTheme = current === 'light' ? 'dark' : 'light';
            document.body.classList.remove(current);
            document.body.classList.add(newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeButtonText(newTheme);
        });

        function updateThemeButtonText(theme) {
            const toggleBtn = document.getElementById('theme-toggle');
            toggleBtn.innerText = theme === 'light' ? 'üåô Dark Mode' : '‚òÄÔ∏è Light Mode';

            const logo = document.getElementById('site-logo');
            const newLogoSrc = theme === 'light' ? logo.dataset.light : logo.dataset.dark;
            logo.src = newLogoSrc;
        }


       
        function setActiveButton(index) {
            document.querySelectorAll('.playlist-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-index="${index}"]`).classList.add('active');
        }

      
        generatePlaylistButtons();
        loadVideos();

        const splashMessages = [
        "‚ú®Sparkling like glitter!‚ú®",
        "Now with 200% more pink!",
        "Kay was here üíï",
        "Wonhee is cute!",
        "This time I want...",
        "Wonhee is cute!",
        "Cafe Moka ‚òï",
        "Squirtle.. I mean.. Iroha üê¢",
        "Stop .. S.T.O.P",
        "Yunah, we love youüêÜ",
        "Welcome to the Pink Cabinet",
        "Powered by ILLIT energy ‚ú®",
        "Cherish My Love ‚ù§Ô∏è",
        "You're a lucky girl!",
        "Life is like a box of Almond Chocolates üç´",
        "Join r/ILLIT today!"
        ];

        // üéâ Splash overrides for special days
        const splashOverrides = {
        "12-25": "Merry Christmas! üéÑ",
        "10-31": "Spooky season is here! üéÉ",
        "02-14": "Happy Valentine's Day üíò",
        "01-15": "Happy Birthday Yunah! üéÇ", 
        "05-11": "Happy Birthday Minju! üéÇ", 
        "10-08": "Happy Birthday Moka! üéÇ", 
        "06-26": "Happy Birthday Wonhee! üéÇ", 
        "02-04": "Happy Birthday Iroha! üéÇ", 
       // "04-01": "April Fools! ü§°", 
        };

        function getTodayKey() {
        const now = new Date();
        const month = String(now.getMonth() + 1).padStart(2, '0'); // 0-indexed
        const day = String(now.getDate()).padStart(2, '0');
        return `${month}-${day}`;
        }

        const splash = document.getElementById('splash-text');
        const todayKey = getTodayKey();

        if (splashOverrides[todayKey]) {
        splash.textContent = splashOverrides[todayKey];
        } else {
        const randomSplash = splashMessages[Math.floor(Math.random() * splashMessages.length)];
        splash.textContent = randomSplash;
        }
    </script>
</body>
</html>
